
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Login</title>
<link rel="stylesheet" type="text/css" href="style.css" media="all" />
<script	src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
	console.log("poop");
	$(document).ready(function() {
		// show login/register
		$('#link_login').click(function(){
			console.log("login clicked");
			$('#form_login').show();
			$('#form_register').hide();
		});
		
		$('#link_register').click(function(){
			console.log("register");
			$('#form_login').hide();
			$('#form_register').show();
		});
		
		// submit button action
		$('#form_login').submit(function(event) {
			event.preventDefault();
			var user = $('#user_login').val();
			var passwd = $('#passwd_login').val();
			console.log(user);
			console.log(passwd);
			if(user.length == 0 || passwd.length == 0)
			{
				$('#login_err_footnote').show();
				if(user.length == 0)
				{
					$('#login_username_req').show();
				}
				if(passwd.length == 0)
				{
					$('#login_passwd_req').show();
				}
				
				return;
			}
			else
			{
				$('#login_err_footnote').hide();
				$('#login_username_req').hide();
				$('#login_passwd_req').hide();
			}
			
			var settings = {
				url : "login",
				type : "POST",
				data : "REQ_TYPE=LOGIN&U="+ user + "&P=" + passwd,
				success : function(a, b, c) {
					alert(a);
					alert(b);
					alert(c);
					window.location = "https://localhost/soup/HelloWorldServlet";
				},
				error : function(jqXHR, statusText, CodeText) {
					$('#login_err').show();
				}
			};
			jQuery.ajax(settings);
			});
		
		$('#form_register').submit(function(event) {
			event.preventDefault();
			var user = $('#register_user_login').val();
			var passwd = $('#register_passwd_login').val();
			console.log(user);
			console.log(passwd);
			if(user.length == 0 || passwd.length == 0)
			{
				$('#register_err_footnote').show();
				if(user.length == 0)
				{
					$('#register_username_req').show();
				}
				if(passwd.length == 0)
				{
					$('#register_passwd_req').show();
				}
				
				return;
			}
			else
			{
				$('#register_err_footnote').hide();
				$('#register_username_req').hide();
				$('#register_passwd_req').hide();
			}
			
			var settings = {
				url : "login",
				type : "POST",
				data : "REQ_TYPE=REGISTER&U="+ user + "&P=" + passwd,
				success : function(a, b, c) {
					alert(a);
					alert(b);
					alert(c);
					window.location = "https://localhost/soup/HelloWorldServlet";
				},
				error : function(jqXHR, statusText, CodeText) {
					$('#register_err').show();
				}
			};
			jQuery.ajax(settings);
			});
		return;
	});
</script>
</head>
<body id="main_body">
	<div id="form_container">
		<h1>
			<a>navigation should go in this area</a>
		</h1>
		<form id="form_login" class="appnitro">
			<div class="form_description">
				<h2>Login</h2>
				<p>Login if you already have an account or <a id="link_register" style="color: blue; font-weight: bolder;">register</a> a new account.</p>
			</div>
			<ul>
				<li id="li_1">
					<label class="description" for="user_login">Username <a id="login_username_req" style="color: red; font-weight: bolder; display: none;">*</a></label>
					<div>
						<input id="user_login" name="U" class="element text medium" type="text" maxlength="255" value="" />
					</div>
				</li>
				<li id="li_2">
					<label class="description" for="passwd_login">Password <a id="login_passwd_req" style="color: red; font-weight: bolder; display: none;">*</a></label>
					<div>
						<input id="passwd_login" name="P" class="element text medium"
							type="password" maxlength="255" value="" />
					</div>
				</li>
				<li class="buttons">
					<div id="login_err" style="display: none; color: red; font-weight: bolder;">Invalid login information :(</div>
					<div id="login_err_footnote" style="display: none; color: red; font-weight: bolder;">* = Required</div>
					<input class="button_text" type="submit" value="login" />
				</li>
			</ul>
		</form>
			
		<form id="form_register" class="appnitro" style="display: none">
			<div class="form_description">
				<h2>Register</h2>
				<p>Create a new account or <a id="link_login" style="color: blue; font-weight: bolder;">login</a> if you already have one.</p>
			</div>
			<ul>
				<li id="li_1">
					<label class="description" for="register_user_login">Username <a id="register_username_req" style="color: red; font-weight: bolder; display: none;">*</a></label>
					<div>
						<input id="register_user_login" name="U" class="element text medium" type="text" maxlength="255" value="" />
					</div>
				</li>
				<li id="li_2">
					<label class="description" for="register_passwd_login">Password <a id="register_passwd_req" style="color: red; font-weight: bolder; display: none;">*</a></label>
					<div>
						<input id="register_passwd_login" name="P" class="element text medium" type="password" maxlength="255" value="" />
					</div>
				</li>
				<li class="buttons">
					<div id="register_err" style="display: none; color: red; font-weight: bolder;">Username is already taken :(</div>
					<div id="register_err_footnote" style="display: none; color: red; font-weight: bolder;">* = Required</div>
					<input class="button_text" type="submit" value="register" />
				</li>
			</ul>
		</form>
	</div>
</body>
</html>